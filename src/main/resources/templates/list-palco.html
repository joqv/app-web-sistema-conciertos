<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Panel de Administración - Palcos</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
<nav th:replace="~{componentes/_fragmentos :: navPrincipalFragment}"></nav>

<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3>Lista de Palcos</h3>
        <a th:href="@{/nuevo}" class="btn btn-success">+ Registrar nuevo palco</a>
    </div>

    <table class="table table-bordered table-hover">
        <thead class="table-dark">
        <tr>
            <th style="width: 6rem;">Código</th>
            <th>Nombre Palco</th>
            <th>Aforo</th>
            <th>Ubicación</th>
            <th style="width: 160px;">Acciones</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="palco : ${palcoList}">
            <td th:text="${palco.idPalco}"></td>
            <td th:text="${palco.nombrePalco}"></td>
            <td th:text="${palco.aforo}"></td>
            <td th:text="${palco.ubicacion}"></td>
            <td style="white-space: nowrap;">
                <div class="d-flex gap-1">
                    <a th:href="@{/view/{id}(id=${palco.idPalco})}" class="btn btn-sm btn-primary"><i class="bi bi-eye"></i></a>
                    <a th:href="@{/edit/{id}(id=${palco.idPalco})}" class="btn btn-sm btn-warning"><i class="bi bi-pencil"></i></a>
                    <a th:href="@{/remove/{id}(id=${palco.idPalco})}"
                       class="btn btn-sm btn-danger"
                       onclick="return confirm('¿Estás seguro de que deseas eliminar este palco?');">
                        <i class="bi bi-trash3"></i>
                    </a>
                </div>
            </td>
        </tr>

        <div th:if="${mensaje}" class="alert alert-success" th:text="${mensaje}"></div>
        <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

        </tbody>
    </table>

    <div class="mt-4 text-end">
        <a th:href="@{/inicio}" class="btn btn-secondary">Volver</a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const error = /*[[${error}]]*/ null;
    const mensaje = /*[[${mensaje}]]*/ null;

    if (error) {
      alert(error);
    } else if (mensaje) {
      alert(mensaje);
    }
</script>
</body>
</html>